<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Model Canvas (Beautiful A4)</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- 1. Global Settings --- */
        body { 
            font-family: 'Sarabun', sans-serif; 
            background-color: #525252; 
            margin: 0; padding: 20px;
            display: flex; justify-content: center; align-items: flex-start;
            min-width: 297mm; 
        }

        .page-container {
            width: 297mm; 
            height: 210mm; 
            background: white;
            padding: 10mm;
            box-sizing: border-box;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            position: relative;
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
        }

        /* --- 2. BMC Grid Layout --- */
        .bmc-grid {
            display: grid;
            grid-template-columns: repeat(10, 1fr); 
            grid-template-rows: repeat(2, 2fr) 1fr; 
            gap: 4px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏ä‡∏±‡∏î‡∏Ç‡∏∂‡πâ‡∏ô */
            background-color: white; /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Ç‡∏≠‡∏á Gap */
            flex-grow: 1;
            border: 1px solid #e5e7eb;
        }

        .bmc-block {
            padding: 10px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.2s;
            border-radius: 4px; /* ‡∏•‡∏ö‡∏°‡∏∏‡∏°‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡∏∏‡πà‡∏°‡∏ô‡∏ß‡∏• */
            position: relative;
        }
        .bmc-block:hover { 
            filter: brightness(0.95); /* ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏≠‡∏≤‡πÄ‡∏°‡∏≤‡∏™‡πå‡∏ä‡∏µ‡πâ‡πÉ‡∏´‡πâ‡∏™‡∏µ‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡∏ô‡∏¥‡∏î‡∏ô‡∏∂‡∏á */
            transform: translateY(-1px);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            z-index: 10;
        }

        /* --- 3. Color Coding Areas --- */
        
        /* Infrastructure (Backstage) - Blue Tones */
        .area-kp { grid-column: 1 / span 2; grid-row: 1 / span 2; background-color: #F0F9FF; border: 1px solid #BAE6FD; }
        .area-ka { grid-column: 3 / span 2; grid-row: 1 / span 1; background-color: #F0F9FF; border: 1px solid #BAE6FD; }
        .area-kr { grid-column: 3 / span 2; grid-row: 2 / span 1; background-color: #F0F9FF; border: 1px solid #BAE6FD; }

        /* Offer (Center Stage) - Red/Pink Tones */
        .area-vp { grid-column: 5 / span 2; grid-row: 1 / span 2; background-color: #FFF1F2; border: 1px solid #FECDD3; }

        /* Customer (Frontstage) - Green Tones */
        .area-cr { grid-column: 7 / span 2; grid-row: 1 / span 1; background-color: #F0FDF4; border: 1px solid #BBF7D0; }
        .area-ch { grid-column: 7 / span 2; grid-row: 2 / span 1; background-color: #F0FDF4; border: 1px solid #BBF7D0; }
        .area-cs { grid-column: 9 / span 2; grid-row: 1 / span 2; background-color: #F0FDF4; border: 1px solid #BBF7D0; }

        /* Finance (Bottom Line) - Yellow/Orange Tones */
        .area-cost { grid-column: 1 / span 5; grid-row: 3 / span 1; background-color: #FFFBEB; border: 1px solid #FDE68A; }
        .area-rev  { grid-column: 6 / span 5; grid-row: 3 / span 1; background-color: #FFFBEB; border: 1px solid #FDE68A; }


        /* --- Components --- */
        .block-header {
            display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px;
        }
        .block-title { font-size: 11px; font-weight: 700; color: #374151; text-transform: uppercase; letter-spacing: 0.5px; }
        .block-icon { opacity: 0.6; font-size: 14px; }
        
        .link-badge {
            display: inline-block; font-size: 9px; font-weight: 600;
            padding: 1px 6px; border-radius: 10px; margin-bottom: 6px;
            background-color: rgba(255,255,255,0.8); 
            color: #4B5563; border: 1px solid rgba(0,0,0,0.1);
            width: fit-content; box-shadow: 0 1px 1px rgba(0,0,0,0.05);
        }

        .post-it {
            background-color: #FEF3C7; /* Sticky Note Yellow */
            padding: 6px 8px; 
            border-radius: 2px;
            font-size: 11px;
            line-height: 1.4;
            border-left: 3px solid #F59E0B;
            box-shadow: 1px 1px 3px rgba(0,0,0,0.1);
            flex-grow: 1;
            white-space: pre-wrap;
            overflow-y: auto;
            color: #1F2937;
        }
        
        .empty-placeholder {
            color: #9CA3AF;
            font-size: 10px;
            font-style: italic;
            margin-top: 8px;
            text-align: center;
            pointer-events: none;
            opacity: 0.7;
        }

        /* Tools */
        .floating-tools {
            position: fixed; top: 20px; right: 20px; z-index: 100;
            display: flex; flex-direction: column; gap: 10px;
        }
        .btn-tool {
            padding: 10px 20px; border-radius: 30px; color: white; font-weight: bold; border: none; cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3); font-family: 'Sarabun'; font-size: 13px; transition: transform 0.2s;
            display: flex; align-items: center; gap: 8px;
        }
        .btn-tool:hover { transform: scale(1.05); }

        .header-input { border: none; border-bottom: 1px dashed #9CA3AF; width: 100%; outline: none; font-family: 'Sarabun'; background: transparent; font-size: 12px; padding: 2px 0; }
        
        @media print {
            @page { size: A4 landscape; margin: 0; }
            body { background: white; padding: 0; display: block; min-width: auto; -webkit-print-color-adjust: exact; }
            .page-container { width: 100%; height: 100vh; box-shadow: none; margin: 0; padding: 5mm; }
            .floating-tools { display: none; }
            .post-it { overflow: hidden; border: 1px solid #ddd; }
            /* Ensure background colors print */
            .area-kp, .area-ka, .area-kr, .area-vp, .area-cr, .area-ch, .area-cs, .area-cost, .area-rev {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
            }
        }
    </style>
</head>
<body>

    <div class="floating-tools">
        <button id="toggleExampleButton" class="btn-tool bg-green-600 hover:bg-green-700">üí° ‡∏î‡∏π‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏£‡∏π‡∏õ</button>
        <button id="exportImageButton" class="btn-tool bg-blue-600 hover:bg-blue-700">üì∑ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</button>
        <button id="clearButton" class="btn-tool bg-red-500 hover:bg-red-600">üóëÔ∏è ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
    </div>

    <div id="bmc-capture-area" class="page-container">
        
        <div class="mb-3 pb-2 border-b-2 border-gray-800 flex items-end justify-between">
            <div>
                <h1 class="text-2xl font-bold text-gray-900 leading-none tracking-tight">Business Model Canvas</h1>
                <p class="text-[10px] text-gray-500 mt-1 font-medium">Integrated Worksheet for Innovation Project</p>
            </div>
            <div class="flex gap-6 w-2/3">
                <div class="flex-1">
                    <label class="text-[9px] font-bold text-gray-500 uppercase tracking-wider">Designed For:</label>
                    <input type="text" id="businessNameInput" class="header-input" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à...">
                </div>
                <div class="flex-1">
                    <label class="text-[9px] font-bold text-gray-500 uppercase tracking-wider">Designed By:</label>
                    <input type="text" id="teamNameInput" class="header-input" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡∏°...">
                </div>
                <div class="w-24">
                    <label class="text-[9px] font-bold text-gray-500 uppercase tracking-wider">Date:</label>
                    <input type="text" id="versionInput" class="header-input" placeholder="‡∏ß‡∏ß/‡∏î‡∏î/‡∏õ‡∏õ">
                </div>
            </div>
        </div>

        <div class="bmc-grid">
            
            <div class="bmc-block area-kp" data-id="kp">
                <div class="block-header">
                    <div class="block-title">8. Key Partners</div>
                    <span class="block-icon">üîó</span>
                </div>
                <div class="link-badge">SIPOC (Supplier)</div>
                <div class="post-it hidden" id="post-it-kp"></div>
                <div class="empty-placeholder" id="ph-kp">‡πÉ‡∏Ñ‡∏£‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏£‡∏≤?</div>
            </div>

            <div class="bmc-block area-ka" data-id="ka">
                <div class="block-header">
                    <div class="block-title">7. Key Activities</div>
                    <span class="block-icon">‚öôÔ∏è</span>
                </div>
                <div class="link-badge">TQC (Process)</div>
                <div class="post-it hidden" id="post-it-ka"></div>
                <div class="empty-placeholder" id="ph-ka">‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á?</div>
            </div>

            <div class="bmc-block area-kr" data-id="kr">
                <div class="block-header">
                    <div class="block-title">6. Key Resources</div>
                    <span class="block-icon">üì¶</span>
                </div>
                <div class="link-badge">MPB / SIPOC</div>
                <div class="post-it hidden" id="post-it-kr"></div>
                <div class="empty-placeholder" id="ph-kr">‡πÉ‡∏ä‡πâ‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á?</div>
            </div>

            <div class="bmc-block area-vp" data-id="vp">
                <div class="block-header">
                    <div class="block-title text-rose-700">1. Value Propositions</div>
                    <span class="block-icon text-rose-500">üéÅ</span>
                </div>
                <div class="link-badge bg-white text-rose-600 border-rose-200">MPD / CER</div>
                <div class="post-it hidden border-l-rose-500" id="post-it-vp"></div>
                <div class="empty-placeholder" id="ph-vp">‡∏î‡∏µ‡∏¢‡∏±‡∏á‡πÑ‡∏á? ‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏≠‡∏∞‡πÑ‡∏£?</div>
            </div>

            <div class="bmc-block area-cr" data-id="cr">
                <div class="block-header">
                    <div class="block-title">4. Relationships</div>
                    <span class="block-icon">‚ù§Ô∏è</span>
                </div>
                <div class="link-badge">Empathy (Feel)</div>
                <div class="post-it hidden" id="post-it-cr"></div>
                <div class="empty-placeholder" id="ph-cr">‡∏î‡∏π‡πÅ‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?</div>
            </div>

            <div class="bmc-block area-ch" data-id="ch">
                <div class="block-header">
                    <div class="block-title">3. Channels</div>
                    <span class="block-icon">üöö</span>
                </div>
                <div class="link-badge">TOWS (Opp)</div>
                <div class="post-it hidden" id="post-it-ch"></div>
                <div class="empty-placeholder" id="ph-ch">‡∏™‡πà‡∏á‡∏°‡∏≠‡∏ö‡∏ó‡∏≤‡∏á‡πÑ‡∏´‡∏ô?</div>
            </div>

            <div class="bmc-block area-cs" data-id="cs">
                <div class="block-header">
                    <div class="block-title">2. Customer Segments</div>
                    <span class="block-icon">üë•</span>
                </div>
                <div class="link-badge">Empathy (Persona)</div>
                <div class="post-it hidden" id="post-it-cs"></div>
                <div class="empty-placeholder" id="ph-cs">‡∏Ç‡∏≤‡∏¢‡πÉ‡∏Ñ‡∏£?</div>
            </div>

            <div class="bmc-block area-cost" data-id="cost">
                <div class="block-header">
                    <div class="block-title">9. Cost Structure</div>
                    <span class="block-icon">üí∏</span>
                </div>
                <div class="link-badge">TQC / RMI</div>
                <div class="post-it hidden" id="post-it-cost"></div>
                <div class="empty-placeholder" id="ph-cost">‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡πà‡∏≤‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á?</div>
            </div>

            <div class="bmc-block area-rev" data-id="rev">
                <div class="block-header">
                    <div class="block-title">5. Revenue Streams</div>
                    <span class="block-icon">üí∞</span>
                </div>
                <div class="link-badge">TOWS (Strategy)</div>
                <div class="post-it hidden" id="post-it-rev"></div>
                <div class="empty-placeholder" id="ph-rev">‡πÑ‡∏î‡πâ‡πÄ‡∏á‡∏¥‡∏ô‡∏à‡∏≤‡∏Å‡πÑ‡∏´‡∏ô?</div>
            </div>

        </div>
    </div>

    <div id="modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden transform transition-all scale-95 opacity-0" id="modalContent">
            <div class="p-6">
                <h3 class="text-lg font-bold text-gray-900 mb-2 flex items-center gap-2">
                    <span id="modalIcon"></span>
                    <span id="modalTitle"></span>
                </h3>
                
                <div class="bg-indigo-50 p-3 rounded-lg mb-4 border border-indigo-100">
                    <p class="text-xs text-indigo-800 font-bold uppercase mb-1">üí° ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ (Guide):</p>
                    <p class="text-sm text-indigo-700 leading-relaxed" id="modalDescription"></p>
                </div>

                <div class="relative">
                    <textarea id="modalTextarea" rows="6" class="w-full p-4 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none resize-none bg-gray-50 focus:bg-white transition-colors" placeholder=""></textarea>
                    <div class="absolute bottom-2 right-2 text-[10px] text-gray-400 pointer-events-none">
                        *‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ó‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢
                    </div>
                </div>
            </div>
            <div class="bg-gray-50 px-6 py-4 flex justify-end gap-3 border-t border-gray-200">
                <button id="modalCancel" class="px-5 py-2 rounded-full text-gray-600 hover:bg-gray-200 text-sm font-bold transition-colors">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                <button id="modalSave" class="px-5 py-2 rounded-full bg-blue-600 text-white hover:bg-blue-700 text-sm font-bold shadow-lg transition-transform active:scale-95">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
            </div>
        </div>
    </div>

    <script>
        // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞ Placeholder
        const bmcDefinition = {
            "kp": { 
                title: "8. Key Partners", icon: "üîó",
                desc: "‡πÉ‡∏Ñ‡∏£‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏£‡∏≤‡∏ú‡∏•‡∏¥‡∏ï? ‡πÉ‡∏Ñ‡∏£‡∏™‡πà‡∏á‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö? Partner ‡∏´‡∏•‡∏±‡∏Å‡∏Ñ‡∏∑‡∏≠‡πÉ‡∏Ñ‡∏£?",
                placeholder: "- ‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÅ‡∏°‡πà‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡∏Å‡∏£ (‡∏™‡πà‡∏á‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£)\n- ‡∏≠‡∏ö‡∏ï. (‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà)\n- ‡∏£‡πâ‡∏≤‡∏ô‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå (Supplier)"
            },
            "ka": { 
                title: "7. Key Activities", icon: "‚öôÔ∏è",
                desc: "‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏´‡∏•‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?",
                placeholder: "- ‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡πÅ‡∏•‡∏∞‡∏ï‡∏≤‡∏Å‡πÅ‡∏´‡πâ‡∏á\n- ‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏Å‡∏±‡∏î‡∏™‡∏≤‡∏£\n- ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û (QC)\n- ‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå"
            },
            "kr": { 
                title: "6. Key Resources", icon: "üì¶",
                desc: "‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ (‡∏Ñ‡∏ô, ‡πÄ‡∏á‡∏¥‡∏ô, ‡∏Ç‡∏≠‡∏á) ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?",
                placeholder: "- ‡πÉ‡∏ö‡πÄ‡∏´‡∏á‡∏∑‡∏≠‡∏Å‡∏õ‡∏•‡∏≤‡∏´‡∏°‡∏≠ 50 ‡∏Å‡∏Å.\n- ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏±‡πà‡∏ô‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏£‡∏π‡∏õ\n- ‡∏ó‡∏µ‡∏°‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢ 3 ‡∏Ñ‡∏ô\n- ‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏∏‡∏ô 5,000 ‡∏ö‡∏≤‡∏ó"
            },
            "vp": { 
                title: "1. Value Propositions", icon: "üéÅ",
                desc: "‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏£‡∏≤‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤? ‡∏ó‡∏≥‡πÑ‡∏°‡πÄ‡∏Ç‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏£‡∏≤?",
                placeholder: "- ‡∏î‡∏π‡∏î‡∏ã‡∏±‡∏ö‡∏™‡∏≤‡∏£‡∏û‡∏¥‡∏©‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á 80% (‡∏°‡∏µ‡∏ú‡∏•‡πÅ‡∏•‡πá‡∏ö)\n- ‡∏ú‡∏•‡∏¥‡∏ï‡∏à‡∏≤‡∏Å‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥ 100% ‡∏¢‡πà‡∏≠‡∏¢‡∏™‡∏•‡∏≤‡∏¢‡πÑ‡∏î‡πâ\n- ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ñ‡∏π‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏Ñ‡∏°‡∏µ 20%\n- ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢ ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏¢‡∏∏‡πà‡∏á‡∏¢‡∏≤‡∏Å"
            },
            "cr": { 
                title: "4. Relationships", icon: "‚ù§Ô∏è",
                desc: "‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏≤‡∏ô‡∏≤‡∏ô‡πÜ?",
                placeholder: "- ‡∏°‡∏µ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏ï‡∏≠‡∏ö‡πÄ‡∏û‡∏à‡πÑ‡∏ß‡πÉ‡∏ô 1 ‡∏ä‡∏°.\n- ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ 7 ‡∏ß‡∏±‡∏ô\n- ‡∏°‡∏µ‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÑ‡∏•‡∏ô‡πå‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏ü‡∏£‡∏µ\n- ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏™‡∏∞‡∏™‡∏°‡πÅ‡∏ï‡πâ‡∏°"
            },
            "ch": { 
                title: "3. Channels", icon: "üöö",
                desc: "‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏à‡∏∞‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å‡πÅ‡∏•‡∏∞‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏£‡∏≤‡πÑ‡∏î‡πâ‡∏ó‡∏≤‡∏á‡πÑ‡∏´‡∏ô‡∏ö‡πâ‡∏≤‡∏á?",
                placeholder: "- ‡∏ù‡∏≤‡∏Å‡∏Ç‡∏≤‡∏¢‡∏£‡πâ‡∏≤‡∏ô‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏Å‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á\n- Facebook Page / TikTok Shop\n- ‡∏≠‡∏≠‡∏Å‡∏ö‡∏π‡∏ò‡∏á‡∏≤‡∏ô OTOP"
            },
            "cs": { 
                title: "2. Customer Segments", icon: "üë•",
                desc: "‡πÉ‡∏Ñ‡∏£‡∏Ñ‡∏∑‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏ô‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤?",
                placeholder: "- ‡∏ú‡∏π‡πâ‡∏ô‡∏≥‡∏ä‡∏∏‡∏°‡∏ä‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏à‡∏≠‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ô‡πâ‡∏≥‡πÄ‡∏™‡∏µ‡∏¢\n- ‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô SME ‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏•‡πá‡∏Å\n- ‡∏Ñ‡∏ô‡∏£‡∏∏‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏£‡∏±‡∏Å‡∏©‡πå‡πÇ‡∏•‡∏Å (Eco)"
            },
            "cost": { 
                title: "9. Cost Structure", icon: "üí∏",
                desc: "‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏´‡∏•‡∏±‡∏Å‡πÜ ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏à‡πà‡∏≤‡∏¢‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á?",
                placeholder: "- ‡∏Ñ‡πà‡∏≤‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö (‡πÉ‡∏ö‡πÑ‡∏°‡πâ, ‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå)\n- ‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏ú‡∏•‡∏¥‡∏ï\n- ‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≥ ‡∏Ñ‡πà‡∏≤‡πÑ‡∏ü\n- ‡∏Ñ‡πà‡∏≤‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î"
            },
            "rev": { 
                title: "5. Revenue Streams", icon: "üí∞",
                desc: "‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÑ‡∏î‡πâ‡πÄ‡∏á‡∏¥‡∏ô‡∏à‡∏≤‡∏Å‡∏ó‡∏≤‡∏á‡πÑ‡∏´‡∏ô‡∏ö‡πâ‡∏≤‡∏á? ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà?",
                placeholder: "- ‡∏Ç‡∏≤‡∏¢‡∏õ‡∏•‡∏µ‡∏Å (59 ‡∏ö‡∏≤‡∏ó/‡∏ä‡∏¥‡πâ‡∏ô)\n- ‡∏Ç‡∏≤‡∏¢‡∏™‡πà‡∏á (450 ‡∏ö‡∏≤‡∏ó/‡πÇ‡∏´‡∏•)\n- ‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏∞‡∏ö‡∏ö\n- ‡∏Ñ‡πà‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏Å‡∏£‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏¢"
            }
        };

        const exampleData = {
            "businessName": "CleanMangrove Innovation", "teamName": "Green Guardians", "version": "Draft 1.0",
            "vp": "‚Ä¢ ‡πÅ‡∏ú‡πà‡∏ô‡∏Å‡∏£‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏´‡∏á‡∏∑‡∏≠‡∏Å‡∏õ‡∏•‡∏≤‡∏´‡∏°‡∏≠\n‚Ä¢ ‡∏î‡∏π‡∏î‡∏ã‡∏±‡∏ö‡∏™‡∏≤‡∏£‡∏û‡∏¥‡∏©‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á (CER Verified)\n‚Ä¢ ‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏¥‡∏ï‡∏£‡∏ï‡πà‡∏≠‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°",
            "cs": "‚Ä¢ ‡∏ä‡∏∏‡∏°‡∏ä‡∏ô‡∏£‡∏¥‡∏°‡∏Ñ‡∏•‡∏≠‡∏á\n‚Ä¢ ‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô SME\n‚Ä¢ ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡πâ‡∏≠‡∏á‡∏ñ‡∏¥‡πà‡∏ô",
            "ch": "‚Ä¢ ‡∏Ç‡∏≤‡∏¢‡∏ï‡∏£‡∏á‡∏ú‡∏π‡πâ‡∏ô‡∏≥‡∏ä‡∏∏‡∏°‡∏ä‡∏ô\n‚Ä¢ ‡∏£‡πâ‡∏≤‡∏ô‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏Å‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á\n‚Ä¢ Facebook Page",
            "cr": "‚Ä¢ ‡∏™‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ü‡∏£‡∏µ\n‚Ä¢ ‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏",
            "rev": "‚Ä¢ ‡∏Ç‡∏≤‡∏¢‡∏õ‡∏•‡∏µ‡∏Å‡πÅ‡∏ú‡πà‡∏ô‡∏•‡∏∞ 50 ‡∏ö‡∏≤‡∏ó\n‚Ä¢ ‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏∞‡∏ö‡∏ö",
            "kr": "‚Ä¢ ‡πÉ‡∏ö‡πÄ‡∏´‡∏á‡∏∑‡∏≠‡∏Å‡∏õ‡∏•‡∏≤‡∏´‡∏°‡∏≠ (MPB)\n‚Ä¢ ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏≠‡∏±‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏£‡∏π‡∏õ",
            "ka": "‚Ä¢ ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡πÅ‡∏•‡∏∞‡∏ï‡∏≤‡∏Å‡πÅ‡∏´‡πâ‡∏á\n‚Ä¢ ‡∏™‡∏Å‡∏±‡∏î‡∏™‡∏≤‡∏£‡πÅ‡∏ó‡∏ô‡∏ô‡∏¥‡∏ô\n‚Ä¢ ‡∏≠‡∏±‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ú‡πà‡∏ô‡∏Å‡∏£‡∏≠‡∏á",
            "kp": "‚Ä¢ ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ä‡∏≤‡∏ß‡∏ö‡πâ‡∏≤‡∏ô (‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ö‡πÑ‡∏°‡πâ)\n‚Ä¢ ‡∏≠‡∏ö‡∏ï. (‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà)",
            "cost": "‚Ä¢ ‡∏Ñ‡πà‡∏≤‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠‡πÉ‡∏ö‡πÑ‡∏°‡πâ\n‚Ä¢ ‡∏Ñ‡πà‡∏≤‡πÑ‡∏ü‡∏ü‡πâ‡∏≤/‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏±‡∏Å‡∏£\n‚Ä¢ ‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î"
        };

        let bmcData = {};
        let currentId = null;
        let isExample = false;

        function render() {
            Object.keys(bmcDefinition).forEach(key => {
                const text = bmcData[key];
                const postIt = document.getElementById(`post-it-${key}`);
                const ph = document.getElementById(`ph-${key}`);

                if (text && text.trim() !== "") {
                    postIt.textContent = text;
                    postIt.classList.remove('hidden');
                    if(ph) ph.classList.add('hidden');
                } else {
                    postIt.textContent = "";
                    postIt.classList.add('hidden');
                    if(ph) ph.classList.remove('hidden');
                }
            });
            document.getElementById('businessNameInput').value = bmcData.businessName || "";
            document.getElementById('teamNameInput').value = bmcData.teamName || "";
            document.getElementById('versionInput').value = bmcData.version || "";
        }

        function saveData() {
            if(!isExample) {
                bmcData.businessName = document.getElementById('businessNameInput').value;
                bmcData.teamName = document.getElementById('teamNameInput').value;
                bmcData.version = document.getElementById('versionInput').value;
                localStorage.setItem('bmc_color_data', JSON.stringify(bmcData));
            }
        }

        function loadData() {
            const saved = localStorage.getItem('bmc_color_data');
            if(saved) bmcData = JSON.parse(saved);
            render();
        }

        // Modal Logic
        const modal = document.getElementById('modal');
        const modalContent = document.getElementById('modalContent');

        function openModal(id) {
            if(isExample) return;
            currentId = id;
            const def = bmcDefinition[id];
            
            document.getElementById('modalTitle').textContent = def.title;
            document.getElementById('modalIcon').textContent = def.icon;
            document.getElementById('modalDescription').textContent = def.desc;
            
            const textarea = document.getElementById('modalTextarea');
            textarea.value = bmcData[id] || "";
            textarea.placeholder = def.placeholder;
            
            modal.classList.remove('hidden');
            // Animation
            setTimeout(() => {
                modalContent.classList.remove('scale-95', 'opacity-0');
                modalContent.classList.add('scale-100', 'opacity-100');
            }, 10);
            textarea.focus();
        }

        function closeModal() {
            modalContent.classList.remove('scale-100', 'opacity-100');
            modalContent.classList.add('scale-95', 'opacity-0');
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 200);
        }

        document.querySelectorAll('.bmc-block').forEach(block => {
            block.addEventListener('click', () => openModal(block.dataset.id));
        });

        document.getElementById('modalSave').addEventListener('click', () => {
            if(currentId) {
                bmcData[currentId] = document.getElementById('modalTextarea').value;
                render(); saveData();
                closeModal();
            }
        });
        document.getElementById('modalCancel').addEventListener('click', closeModal);

        ['businessNameInput', 'teamNameInput', 'versionInput'].forEach(id => {
            document.getElementById(id).addEventListener('input', saveData);
        });

        document.getElementById('toggleExampleButton').addEventListener('click', (e) => {
            isExample = !isExample;
            if(isExample) {
                bmcData = {...exampleData};
                e.target.innerHTML = "‚ùå ‡∏õ‡∏¥‡∏î‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á";
                e.target.classList.replace('bg-green-600', 'bg-red-500');
                e.target.classList.replace('hover:bg-green-700', 'hover:bg-red-600');
            } else {
                loadData();
                e.target.innerHTML = "üí° ‡∏î‡∏π‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏£‡∏π‡∏õ";
                e.target.classList.replace('bg-red-500', 'bg-green-600');
                e.target.classList.replace('hover:bg-red-600', 'hover:bg-green-700');
            }
            render();
        });

        document.getElementById('clearButton').addEventListener('click', () => {
            if(confirm('‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?')) {
                localStorage.removeItem('bmc_color_data');
                bmcData = {}; render();
            }
        });

        document.getElementById('exportImageButton').addEventListener('click', () => {
            const element = document.getElementById('bmc-capture-area');
            html2canvas(element, { 
                scale: 2,
                backgroundColor: "#ffffff",
                windowWidth: 2000,
                windowHeight: 1200,
                scrollY: -window.scrollY
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = 'BMC-A4-Color.png';
                link.href = canvas.toDataURL();
                link.click();
            });
        });

        loadData();
    </script>
</body>
</html>